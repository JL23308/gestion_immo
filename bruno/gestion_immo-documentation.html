<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>gestion_immo - API Documentation</title>
    <style>
        body { margin: 0; padding: 0; }
        #opencollection-container { width: 100vw; height: 100vh; }
    </style>
    <link rel="stylesheet" href="https://cdn.opencollection.com/docs.css">
    <script src="https://cdn.opencollection.com/docs.js"></script>
</head>
<body>
    <div id="opencollection-container"></div>
    <script>
        const collectionData = "opencollection: 1.0.0\ninfo:\n  name: gestion_immo\nconfig:\n  environments:\n    - name: Local\n      variables:\n        - name: base_url\n          value: http://localhost:8765\n        - name: auth_token\n          value: ''\n        - name: apartment_id\n          value: '1'\n        - name: lease_id\n          value: '1'\n        - name: user_id\n          value: '1'\nitems:\n  - info:\n      name: Apartments\n      type: folder\n    items:\n      - info:\n          name: create\n          type: http\n          seq: 1\n        http:\n          method: POST\n          url: '{{base_url}}/api/v1/apartments'\n          body:\n            type: json\n            data: |-\n              {\n                \"address\": \"25 Rue de la Paix, 75002 Paris\",\n                \"rent\": 1800.00,\n                \"size\": 85,\n                \"nb_rooms\": 3,\n                \"nb_bathrooms\": 2,\n                \"booked\": false,\n                \"energy_class\": \"B\",\n                \"description\": \"Appartement lumineux avec balcon, proche m\xE9tro Op\xE9ra\"\n              }\n          auth:\n            type: bearer\n            token: '{{auth_token}}'\n        runtime:\n          scripts:\n            - type: after-response\n              code: |-\n                if (res.body.response && res.body.response.success && res.body.response.data.id) {\n                  bru.setEnvVar(\"apartment_id\", res.body.response.data.id);\n                }\n            - type: tests\n              code: |-\n                test(\"Response is valid\", function() {\n                  expect([200, 201, 400]).to.include(res.status);\n                });\n\n                test(\"Response has correct structure\", function() {\n                  expect(res.body.response).to.be.an('object');\n                });\n\n                test(\"If created, apartment data is present\", function() {\n                  if (res.status === 201) {\n                    expect(res.body.response.success).to.equal(true);\n                    expect(res.body.response.data).to.be.an('object');\n                    expect(res.body.response.data.id).to.exist;\n                    expect(res.body.response.data.rent).to.equal(1800);\n                    expect(res.body.response.data.size).to.equal(85);\n                  }\n                });\n\n                test(\"Rent and size are numbers when present\", function() {\n                  if (res.body.response.data) {\n                    expect(res.body.response.data.rent).to.be.a('number');\n                    expect(res.body.response.data.size).to.be.a('number');\n                  }\n                });\n        settings:\n          encodeUrl: true\n          timeout: 0\n          followRedirects: true\n          maxRedirects: 5\n      - info:\n          name: Delete\n          type: http\n          seq: 6\n        http:\n          method: DELETE\n          url: http://localhost:8765/api/v1/apartments/1\n          auth: inherit\n        settings:\n          encodeUrl: true\n          timeout: 0\n          followRedirects: true\n          maxRedirects: 5\n      - info:\n          name: Detail\n          type: http\n          seq: 5\n        http:\n          method: GET\n          url: http://localhost:8765/api/v1/apartments/2\n          auth: inherit\n        runtime:\n          scripts:\n            - type: tests\n              code: |-\n                test(\"Response is valid\", function() {\n                  expect([200, 404]).to.include(res.status);\n                });\n\n                test(\"Response has correct structure\", function() {\n                  expect(res.body.response).to.be.an('object');\n                  expect(res.body.response.code).to.equal(res.status);\n                });\n\n                test(\"If found, apartment data is present\", function() {\n                  if (res.status === 200) {\n                    expect(res.body.response.success).to.equal(true);\n                    expect(res.body.response.data).to.be.an('object');\n                    expect(res.body.response.data.id).to.exist;\n                  }\n                });\n        settings:\n          encodeUrl: true\n          timeout: 0\n          followRedirects: true\n          maxRedirects: 5\n      - info:\n          name: List\n          type: http\n          seq: 2\n        http:\n          method: GET\n          url: '{{base_url}}/api/v1/apartments'\n          auth: inherit\n        runtime:\n          scripts:\n            - type: tests\n              code: |-\n                test(\"Status code is 200\", function() {\n                  expect(res.status).to.equal(200);\n                });\n\n                test(\"Response has success true\", function() {\n                  expect(res.body.response.success).to.equal(true);\n                });\n\n                test(\"Data is an array\", function() {\n                  expect(res.body.response.data).to.be.an('array');\n                });\n\n                test(\"Metadata is present\", function() {\n                  expect(res.body.metadata).to.be.an('object');\n                  expect(res.body.metadata.execution_time).to.exist;\n                });\n        settings:\n          encodeUrl: true\n          timeout: 0\n          followRedirects: true\n          maxRedirects: 5\n      - info:\n          name: Edit\n          type: http\n          seq: 7\n        http:\n          method: PATCH\n          url: http://localhost:8765/api/v1/apartments/2\n          body:\n            type: json\n            data: |-\n              {\n                  \"address\": \"25 Rue de la Paix, 75002 Paris\",\n                  \"rent\": 199999999.00\n              }\n          auth: inherit\n        settings:\n          encodeUrl: true\n          timeout: 0\n          followRedirects: true\n          maxRedirects: 5\n  - info:\n      name: Auth\n      type: folder\n    items:\n      - info:\n          name: Login\n          type: http\n          seq: 2\n        http:\n          method: POST\n          url: '{{base_url}}/api/v1/users/login'\n          body:\n            type: json\n            data: |-\n              {\n                \"email\": \"marie.dupont@example.com\",\n                \"password\": \"SecurePass123!\"\n              }\n        runtime:\n          scripts:\n            - type: after-response\n              code: |-\n                if (res.body.response && res.body.response.success && res.body.response.data.token) {\n                  bru.setEnvVar(\"auth_token\", res.body.response.data.token);\n                }\n            - type: tests\n              code: |-\n                test(\"Status code is 200\", function() {\n                  expect(res.status).to.equal(200);\n                });\n\n                test(\"Response has success true\", function() {\n                  expect(res.body.response.success).to.equal(true);\n                });\n\n                test(\"Token is present\", function() {\n                  expect(res.body.response.data.token).to.exist;\n                  expect(res.body.response.data.token).to.be.a('string');\n                });\n\n                test(\"User info is present\", function() {\n                  expect(res.body.response.data.user).to.be.an('object');\n                  expect(res.body.response.data.user.email).to.equal(\"marie.dupont@example.com\");\n                });\n\n                test(\"Response has code 200\", function() {\n                  expect(res.body.response.code).to.equal(200);\n                });\n        settings:\n          encodeUrl: true\n          timeout: 0\n          followRedirects: true\n          maxRedirects: 5\n      - info:\n          name: Register\n          type: http\n          seq: 1\n        http:\n          method: POST\n          url: '{{base_url}}/api/v1/users/register'\n          body:\n            type: json\n            data: |-\n              {\n                \"email\": \"marie.dupont@example.com\",\n                \"password\": \"SecurePass123!\",\n                \"first_name\": \"Marie\",\n                \"last_name\": \"Dupont\",\n                \"phone\": \"+33612345678\"\n              }\n        runtime:\n          scripts:\n            - type: tests\n              code: |-\n                test(\"Response is valid\", function() {\n                  // Accept both 201 (created) and 400 (already exists) for idempotent tests\n                  expect([201, 400]).to.include(res.status);\n                });\n\n                test(\"Response has correct structure\", function() {\n                  expect(res.body.response).to.be.an('object');\n                  expect(res.body.response.message).to.exist;\n                });\n\n                test(\"If created, user data is present\", function() {\n                  if (res.status === 201) {\n                    expect(res.body.response.success).to.equal(true);\n                    expect(res.body.response.data).to.be.an('object');\n                    expect(res.body.response.data.email).to.equal(\"marie.dupont@example.com\");\n                  }\n                });\n\n                test(\"Metadata is present\", function() {\n                  expect(res.body.metadata).to.be.an('object');\n                  expect(res.body.metadata.execution_time).to.exist;\n                });\n        settings:\n          encodeUrl: true\n          timeout: 0\n          followRedirects: true\n          maxRedirects: 5\n  - info:\n      name: Leases\n      type: folder\n    items:\n      - info:\n          name: Create\n          type: http\n          seq: 3\n        http:\n          method: POST\n          url: http://localhost:8765/api/v1/leases\n          body:\n            type: json\n            data: |-\n              {\n                \"apartment_id\": 1,\n                \"user_id\": 1,\n                \"start_date\": \"2026-03-01\",\n                \"end_date\": \"2027-03-01\",\n                \"deposit\": 3000.00,\n                \"status\": \"active\",\n                \"notes\": \"Bail de 12 mois renouvelable - monthly_rent sera auto-rempli depuis l'appartement\"\n              }\n          auth: inherit\n        runtime:\n          scripts:\n            - type: after-response\n              code: |-\n                if (res.body.response && res.body.response.success && res.body.response.data.id) {\n                  bru.setEnvVar(\"lease_id\", res.body.response.data.id);\n                }\n            - type: tests\n              code: |-\n                test(\"Response is valid\", function() {\n                  expect([200, 201, 400]).to.include(res.status);\n                });\n\n                test(\"Response has correct structure\", function() {\n                  expect(res.body.response).to.be.an('object');\n                });\n\n                test(\"If created, lease data is present\", function() {\n                  if (res.status === 201) {\n                    expect(res.body.response.success).to.equal(true);\n                    expect(res.body.response.data).to.be.an('object');\n                    expect(res.body.response.data.id).to.exist;\n                  }\n                });\n\n                test(\"Monthly rent is auto-filled when present\", function() {\n                  if (res.body.response.data) {\n                    expect(res.body.response.data.monthly_rent).to.exist;\n                    expect(res.body.response.data.monthly_rent).to.be.a('number');\n                  }\n                });\n\n                test(\"Deposit is a number when present\", function() {\n                  if (res.body.response.data) {\n                    expect(res.body.response.data.deposit).to.be.a('number');\n                  }\n                });\n        settings:\n          encodeUrl: true\n          timeout: 0\n          followRedirects: true\n          maxRedirects: 5\n      - info:\n          name: List\n          type: http\n          seq: 1\n        http:\n          method: GET\n          url: '{{base_url}}/api/v1/leases'\n          auth: inherit\n        runtime:\n          scripts:\n            - type: tests\n              code: |-\n                test(\"Status code is 200\", function() {\n                  expect(res.status).to.equal(200);\n                });\n\n                test(\"Response has success true\", function() {\n                  expect(res.body.response.success).to.equal(true);\n                });\n\n                test(\"Data is an array\", function() {\n                  expect(res.body.response.data).to.be.an('array');\n                });\n\n                test(\"Metadata is present\", function() {\n                  expect(res.body.metadata).to.be.an('object');\n                });\n        settings:\n          encodeUrl: true\n          timeout: 0\n          followRedirects: true\n          maxRedirects: 5\n      - info:\n          name: Detail\n          type: http\n          seq: 2\n        http:\n          method: GET\n          url: '{{base_url}}/api/v1/leases/{{lease_id}}'\n          auth: inherit\n        runtime:\n          scripts:\n            - type: tests\n              code: |-\n                test(\"Response is valid\", function() {\n                  expect([200, 404]).to.include(res.status);\n                });\n\n                test(\"Response has correct structure\", function() {\n                  expect(res.body.response).to.be.an('object');\n                  expect(res.body.response.code).to.equal(res.status);\n                });\n\n                test(\"If found, lease data is present\", function() {\n                  if (res.status === 200) {\n                    expect(res.body.response.success).to.equal(true);\n                    expect(res.body.response.data).to.be.an('object');\n                    expect(res.body.response.data.id).to.exist;\n                  }\n                });\n        settings:\n          encodeUrl: true\n          timeout: 0\n          followRedirects: true\n          maxRedirects: 5\n      - info:\n          name: Update\n          type: http\n          seq: 4\n        http:\n          method: PATCH\n          url: '{{base_url}}/api/v1/leases/{{lease_id}}'\n          body:\n            type: json\n            data: |-\n              {\n                \"status\": \"terminated\",\n                \"notes\": \"Lease terminated early\"\n              }\n          auth: inherit\n        settings:\n          encodeUrl: true\n          timeout: 0\n          followRedirects: true\n          maxRedirects: 5\n      - info:\n          name: Delete\n          type: http\n          seq: 5\n        http:\n          method: DELETE\n          url: '{{base_url}}/api/v1/leases/{{lease_id}}'\n          auth: inherit\n        settings:\n          encodeUrl: true\n          timeout: 0\n          followRedirects: true\n          maxRedirects: 5\nrequest:\n  auth:\n    type: bearer\n    token: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJpc3MiOiJnZXN0aW9uX2ltbW8iLCJzdWIiOjEsImlhdCI6MTc3MDI3ODgzOCwiZXhwIjoxNzcwMzY1MjM4fQ.R37SjWRazP9p4vzB5vaXgmXB7XfFwrjw_nTwqNc0RzLlDdUBCUYaiUV556xsyWoXCPrLuWqhHAfZduJKeQSiNgdGLVB2mRl_IEETtF1j8q97X9eoDFuWDCAgBYxFNw2avmtHUAE1JYvPCjS79ME1vZb5hdfvXDJUnt81mkZz7xDSB7YNT1dPSqmnI2R4EbBT8aS4GmJQEczupgVdINGLSQwqG1YQczXLwdltGeb_rJZdjxGwcEmt0KS9NY1ByzRgAzXG7nG7am63tt6GBEeANnAwZVDCfUXtrJk4wZUBEqFK1bse4abpM81FAg-UWVmLRSFKoVT8u7J3WmpDnkT0cA\nbundled: true\nextensions:\n  bruno:\n    ignore:\n      - node_modules\n      - .git\n    exportedAt: '2026-02-05T08:50:54.577Z'\n    exportedUsing: Bruno/3.0.2\n";
        new window.OpenCollection({
            target: document.getElementById('opencollection-container'),
            opencollection: collectionData,
            theme: 'light'
        });
    </script>
</body>
</html>